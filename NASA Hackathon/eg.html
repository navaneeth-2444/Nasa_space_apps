<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Page Position Indicator</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 300vh;
        }

        .section {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .page-indicator {
    position: fixed;
    top: 20px;
    right: 20px;
    width: 100px;
    height: 56px; /* Adjusted height to account for space between bars */
    z-index: 1000;
}

.indicator-bar {
    position: absolute;
    right: 0;
    background-color: #000;
    transition: height 0.5s ease-in-out, top 0.5s ease-in-out;
    border-radius: 15px;
}

.top-bar {
    bottom: 29px;
    width: 100px;
    height: 10px; /* Bar height */
    transform-origin: bottom;
}

.middle-bar {
    top: 30px; /* Increased space to achieve the gap as in your image */
    width: 60px;
    height: 10px; /* Bar height */
    transform-origin: bottom;
}

.bottom-bar {
    top: 42px; /* Increased space below the middle bar */
    width: 100px;
    height: 10px; /* Bar height */
    transition: height 0.5s ease-in-out, top 0.5s ease-in-out;
}

/* State 1: First page */
.state-1 .top-bar {
    height: 30px; /* Expanded state */
    width: 100px;
}
.state-1 .middle-bar {
    height: 10px; /* Thin state */
    width: 100px;
    top: 30px;
}
.state-1 .bottom-bar {
    height: 10px; /* Thin state */
    width: 100px;
}

/* State 2: Second page */
.state-2 .top-bar {
    height: 10px; /* Thin state */
    width: 100px;
}
.state-2 .middle-bar {
    height: 30px; /* Expanded state */
    width: 100px;
}
.state-2 .bottom-bar {
    height: 10px; /* Thin state */
    width: 100px;
    top: 65px;
}

/* State 3: Third page */
.state-3 .top-bar {
    height: 10px; /* Thin state */
    width: 100px;
}
.state-3 .middle-bar {
    height: 10px; /* Thin state */
    width: 100px;
}
.state-3 .bottom-bar {
    height: 30px; /* Expanded state */
    width: 100px;
    top: 45px;
}

    </style>
</head>
<body>
    <div class="page-indicator state-1">
        <div class="indicator-bar top-bar"></div>
        <div class="indicator-bar middle-bar"></div>
        <div class="indicator-bar bottom-bar"></div>
    </div>

    <div class="section" id="section1">Section 1</div>
    <div class="section" id="section2">Section 2</div>
    <div class="section" id="section3">Section 3</div>

    <script>
        const pageIndicator = document.querySelector('.page-indicator');
        const sections = document.querySelectorAll('.section');
        
        function updateIndicator() {
            const scrollPosition = window.scrollY;
            const windowHeight = window.innerHeight;
            const currentSection = Math.floor((scrollPosition + (windowHeight/2)) / windowHeight) + 1;
            
            // Remove all states
            pageIndicator.classList.remove('state-1', 'state-2', 'state-3');
            // Add current state
            pageIndicator.classList.add(`state-${currentSection}`);
        }

        // Listen for scroll events
        window.addEventListener('scroll', () => {
            requestAnimationFrame(updateIndicator);
        });

        // Initial state
        updateIndicator();
    </script>
</body>
</html>