<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UWC Design</title>
    <style>
        @font-face {
        font-family: 'UniNeue';
        src: url('UniNeue-Trial-Regular.ttf') format('truetype');
        }
        body {
            margin: 0;
            padding: 0;
            background-color: #f9f9f9;
            font-family: "UniNeue",sans-serif;
            display: flex;
            justify-content: space-between;
            height: 200vh;
            overflow-x: hidden;
        }
        .left-container, .right-container, .video-container {
            transition: transform 0.8s ease-out;
        }

        .left-container.slide-out {
            transform: translateX(-100%);
        }

        .right-container.slide-out, .video-container.slide-out {
            transform: translateX(150%);
        }
        .container {
            display: flex;
            justify-content: space-between;
            height: 100vh; /* Full viewport height for the first page */
            position: relative;
            transition: opacity 0.5s ease-in-out; /* Fade transition */
            
        }
        .left-container {
            width: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding-left: 20px;
        }

        .right-container {
            width: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding-left: 20px;
            margin-right: 300px;
        }

        .title {
            font-size: 150px;
            font-weight: bold;
            margin-top: 200px;
        }

        .span-container {
            display: flex;
            margin-top: 20px;
        }

        .right-span {
            position: absolute;
            right: 20px;
            bottom: 20px;
        }
        .A1, .A2 {
        padding: 5px 25px;
        background: rgba(163, 163, 163, 0.2); /* Light transparent white */
        backdrop-filter: blur(15px); /* Strong blur effect */
        border-radius: 20px; /* Rounded corners */
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1); /* Softer shadow */
        
        }


        .A1 {
            margin-left: 200px;
            margin-right: 50px;
            margin-top: -100px;
            max-width: 400px;
        }
        p {
            line-height: 20px;
            margin-top: -5px;
        }
        .A2 {
            margin-right: 50px;
            margin-top: -260px;
            max-width: 400px;
        }

        .typewriter-container {
            position: relative;
        }

        .typewriter-text {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            transition: opacity 0.5s ease-out;
        }

        .placeholder-text {
            visibility: hidden;
            white-space: pre-wrap;
        }


        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        .second-page {
            display: none; /* Initially hidden */
            opacity: 0; /* Start as transparent */
            transition: opacity 0.5s ease-in-out; /* Fade transition */
            height: 100vh; /* Full viewport height */
            background-color: #f9f9f9; /* Same background color */
            padding: 20px; /* Padding for content */
        }

        .page-indicator {
        position: fixed;
        top: 20px;
        right: 20px;
        width: 100px;
        height: 56px; /* Adjusted height to account for space between bars */
        z-index: 1000;
    }

    .indicator-bar {
        position: absolute;
        right: 0;
        background-color: #000;
        transition: height 0.5s ease-in-out, top 0.5s ease-in-out;
        border-radius: 15px;
    }

    .top-bar {
        bottom: 29px;
        width: 100px;
        height: 10px; /* Bar height */
        transform-origin: bottom;
    }

    .middle-bar {
        top: 30px; /* Increased space to achieve the gap as in your image */
        width: 60px;
        height: 10px; /* Bar height */
        transform-origin: bottom;
    }

    .bottom-bar {
        top: 42px; /* Increased space below the middle bar */
        width: 100px;
        height: 10px; /* Bar height */
        transition: height 0.5s ease-in-out, top 0.5s ease-in-out;
    }

    /* State 1: First page */
    .state-1 .top-bar {
        height: 30px; /* Expanded state */
        width: 100px;
    }
    .state-1 .middle-bar {
        height: 10px; /* Thin state */
        width: 100px;
        top: 30px;
    }
    .state-1 .bottom-bar {
        height: 10px; /* Thin state */
        width: 100px;
    }

    /* State 2: Second page */
    .state-2 .top-bar {
        height: 10px; /* Thin state */
        width: 100px;
    }
    .state-2 .middle-bar {
        height: 30px; /* Expanded state */
        width: 100px;
    }
    .state-2 .bottom-bar {
        height: 10px; /* Thin state */
        width: 100px;
        top: 65px;
    }

    /* State 3: Third page */
    .state-3 .top-bar {
        height: 10px; /* Thin state */
        width: 100px;
    }
    .state-3 .middle-bar {
        height: 10px; /* Thin state */
        width: 100px;
    }
    .state-3 .bottom-bar {
        height: 30px; /* Expanded state */
        width: 100px;
        top: 45px;
    }
    .video-container {
            position: fixed;
            top: 350px;
            left: 950px;
            width: 700px;
            height: 700px; /* 16:9 aspect ratio */
            overflow: hidden;
            transition: transform 0.5s ease-out;
        }
        .video-container video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain; /* Ensure the video fits properly */
        }
        /* Apply the custom mask */
        #videoB {
            -webkit-mask-image: url('cursor.png'); /* Apply your PNG mask here */
            -webkit-mask-size: 300px 300px; /* Adjust the size of the mask */
            -webkit-mask-repeat: no-repeat; /* Prevent the mask from repeating */
            mask-image: url('cursor.png'); /* Fallback for other browsers */
            mask-size: 300px 300px;
            mask-repeat: no-repeat;
            -webkit-mask-position: -9999px -9999px;
            mask-position: -9999px -9999px;
        }

        .new-heading {
        position: fixed;
        top: -100px;
        left: 20px;
        font-size: 140px;
        font-weight: bold;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
    }

    .new-heading.visible {
        opacity: 1;
    }
    .bar-text {
    position: absolute;
    left: 10px; /* Adjust this value to control horizontal positioning */
    top: 3px;
    transform: translateX(30%);
    font-size: 18px; /* Adjust text size */
    color: white; /* Text color */
    font-family: 'UniNeue', sans-serif; /* Font family */
    font-weight: bold; /* Bold text */
    text-transform: uppercase; /* Optional: Make text uppercase */
    opacity: 1; /* Start fully visible */
    transition: opacity 0.5s ease-out; /* Smooth transition for opacity */
}
.blr {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        
    </style>
</head>
<body>
    <div class="page-indicator state-1">
        <div class="indicator-bar top-bar"></div>
        <div class="indicator-bar middle-bar"></div>
        <div class="indicator-bar bottom-bar"></div>
    </div>
    <div class="container" id="firstPage">
        <div class="left-container">
            <h1 class="title">UWC.</h1>
            <span class="A1">
                <h2>Urbanization.</h2>
                <div class="typewriter-container">
                    <p class="placeholder-text" id="placeholder1">Urbanization, while bringing economic benefits, also presents challenges like housing shortages, infrastructure strain, and pollution. Sustainable urban planning is crucial for creating livable cities.</p>
                    <p class="typewriter-text" id="text1"></p>
                </div>
            </span>
        </div>
        
        <div class="right-container">
            <span class="A2">
                <h2>Water crisis.</h2>
                <div class="typewriter-container">
                    <p class="placeholder-text" id="placeholder2">The water crisis, caused by scarcity, pollution, and unequal access, is worsening due to climate change and population growth. Sustainable water management and international cooperation are essential for addressing this global challenge.</p>
                    <p class="typewriter-text" id="text2"></p>
                </div>
            </span>
        </div>
        <div class="video-container">
            <video id="videoA" autoplay muted loop playsinline>
                <source src="RGB.webm" type="video/webm">
            </video>
            <video id="videoB" autoplay muted loop playsinline>
                <source src="BW.webm" type="video/webm">
            </video>
        </div>
    </div>
        <h1 class="new-heading">Visualise.</h1>

    <script>
        function typeWriter(element, text, speed, callback) {
        const words = text.split(' ');
        let currentIndex = 0;
        element.innerHTML = ''; // Clear the content initially

        function typeWord() {
            if (currentIndex < words.length) {
                const span = document.createElement('span');
                span.style.opacity = '0'; // Initially hidden
                span.textContent = words[currentIndex] + ' '; // Add the word with a space
                element.appendChild(span);

                // Animate the opacity for smooth appearance
                setTimeout(() => {
                    span.style.transition = 'opacity 0.5s ease-out'; // Apply smooth transition
                    span.style.opacity = '1'; // Make the word visible
                }, 50);

                currentIndex++;
                setTimeout(typeWord, speed); // Delay before typing the next word
            } else if (callback) {
                setTimeout(callback, 1000); // Small pause before restarting
            }
        }

        typeWord();
    }

        function startTypingEffect() {
            const text1 = document.getElementById('placeholder1').textContent;
            const text2 = document.getElementById('placeholder2').textContent;

            const text1Element = document.getElementById('text1');
            const text2Element = document.getElementById('text2');

            // Clear the previous text
            text1Element.innerHTML = '';
            text2Element.innerHTML = '';

            // Start the typing effect for both paragraphs
            typeWriter(text1Element, text1, 150, () => {  // Speed of typing (lower = faster)
                typeWriter(text2Element, text2, 150, () => {
                    // Restart typing effect after a delay of 6 seconds
                    setTimeout(startTypingEffect, 6000);  // 6 seconds delay before restarting
                });
            });
        }

        // Start typing with an initial delay of 500ms
        setTimeout(startTypingEffect, 500);

        const videoContainer = document.querySelector('.video-container');
        const videoB = document.getElementById('videoB');

        // Synchronize videos
        const videoA = document.getElementById('videoA');
        async function syncVideos() {
            videoA.currentTime = 0;
            videoB.currentTime = 0;

            try {
                await Promise.all([videoA.play(), videoB.play()]);

                videoA.addEventListener('timeupdate', () => {
                    if (Math.abs(videoA.currentTime - videoB.currentTime) > 0.1) {
                        videoB.currentTime = videoA.currentTime;
                    }
                });
            } catch (error) {
                console.error('Error playing videos:', error);
            }
        }

        let videosLoaded = 0;
        function handleVideoLoad() {
            videosLoaded++;
            if (videosLoaded === 2) {
                syncVideos();
            }
        }

        videoA.addEventListener('loadeddata', handleVideoLoad);
        videoB.addEventListener('loadeddata', handleVideoLoad);

        // Move the mask based on mouse position, centering the mask
        videoContainer.addEventListener('mousemove', (e) => {
            const rect = videoContainer.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const maskSize = 200; // Adjust the mask size to match the mask in the CSS

            // Center the mask on the cursor by offsetting by half the mask size
            videoB.style.webkitMaskPosition = `${x - maskSize / 2}px ${y - maskSize / 2}px`;
            videoB.style.maskPosition = `${x - maskSize / 2}px ${y - maskSize / 2}px`;
        });

        videoContainer.addEventListener('mouseleave', () => {
            videoB.style.webkitMaskPosition = '-9999px -9999px'; // Move mask off-screen
            videoB.style.maskPosition = '-9999px -9999px';
        });
        let animationComplete = false;
        let timeoutId = null;

        window.addEventListener('scroll', () => {
            const scrollPosition = window.scrollY;
            const windowHeight = window.innerHeight;
            const leftContainer = document.querySelector('.left-container');
            const rightContainer = document.querySelector('.right-container');
            const videoContainer = document.querySelector('.video-container');
            const pageIndicator = document.querySelector('.page-indicator');
            
            const newHeading = document.querySelector('.new-heading');
            if (scrollPosition > windowHeight * 0.2) {
                leftContainer.classList.add('slide-out');
                rightContainer.classList.add('slide-out');
                videoContainer.classList.add('slide-out');
                
                // Change the state of the page indicator
                pageIndicator.classList.remove('state-1');
                pageIndicator.classList.add('state-2');

                if (!animationComplete) {
                animationComplete = true;
                // Clear any existing timeout
                if (timeoutId) clearTimeout(timeoutId);
                // Set a new timeout
                timeoutId = setTimeout(() => {
                    newHeading.classList.add('visible');
                }, 800); }
            } else {
                leftContainer.classList.remove('slide-out');
                rightContainer.classList.remove('slide-out');
                videoContainer.classList.remove('slide-out');
                
                // Revert the state of the page indicator
                pageIndicator.classList.remove('state-2');
                pageIndicator.classList.add('state-1');
                animationComplete = false;
                newHeading.classList.remove('visible');
                // Clear the timeout if it exists
                if (timeoutId) {
                    clearTimeout(timeoutId);
                    timeoutId = null;
                }
            }
        });

    </script>
</body>
</html>
